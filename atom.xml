<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Sin5&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.sin5th.com/"/>
  <updated>2017-04-18T09:26:16.000Z</updated>
  <id>http://blog.sin5th.com/</id>
  
  <author>
    <name>sin5</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>2017-04-18</title>
    <link href="http://blog.sin5th.com/2017/04/18/2017-04-18/"/>
    <id>http://blog.sin5th.com/2017/04/18/2017-04-18/</id>
    <published>2017-04-18T06:53:13.000Z</published>
    <updated>2017-04-18T09:26:16.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="阅读-apue"><a href="#阅读-apue" class="headerlink" title="阅读 apue"></a>阅读 apue</h1><h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><p>一般用整型常量代表错误原因，如 EACCES 为权限不足。<br>strerror(int) 将整型常量转化为错误字符串。<br>perror(const char *) 打印 <code>自定义字串: 错误字符串</code>。</p>
<h2 id="用户-组"><a href="#用户-组" class="headerlink" title="用户/组"></a>用户/组</h2><p>unix 中用户和组都是用32位整型表示的。<br>相比字符串，整型节省空间、检索高效。<br>getuid，getpid 分别返回<code>用户id</code>和<code>组id</code>。</p>
<h2 id="信号"><a href="#信号" class="headerlink" title="信号"></a>信号</h2><p>三种处理方式：忽略、系统默认、自定义。<br>signal 函数可以为信号注册处理函数。</p>
<h2 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h2><p>unix 使用<code>日历时间</code>和<code>进程时间</code>两种时间值。</p>
<ul>
<li>日历时间：UTC</li>
<li>进程时间：CPU<ul>
<li>时钟时间</li>
<li>用户cpu时间</li>
<li>系统cpu时间</li>
</ul>
</li>
</ul>
<h2 id="系统调用和库函数"><a href="#系统调用和库函数" class="headerlink" title="系统调用和库函数"></a>系统调用和库函数</h2><p>对实现者而言，系统调用与库函数区别很大。<br>对使用者而言，没有太多差别。</p>
<h1 id="调整博客"><a href="#调整博客" class="headerlink" title="调整博客"></a>调整博客</h1><h2 id="给博客加个favicon"><a href="#给博客加个favicon" class="headerlink" title="给博客加个favicon"></a>给博客加个favicon</h2><p>用在线工具制作一个图标。<br>放到 source/favicon.png。<br>修改 themes/next/_config.yml，设置 <code>favicon: /favicon.png</code>。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;阅读-apue&quot;&gt;&lt;a href=&quot;#阅读-apue&quot; class=&quot;headerlink&quot; title=&quot;阅读 apue&quot;&gt;&lt;/a&gt;阅读 apue&lt;/h1&gt;&lt;h2 id=&quot;错误处理&quot;&gt;&lt;a href=&quot;#错误处理&quot; class=&quot;headerlink&quot; titl
    
    </summary>
    
    
      <category term="daily" scheme="http://blog.sin5th.com/tags/daily/"/>
    
  </entry>
  
  <entry>
    <title>2017-04-17</title>
    <link href="http://blog.sin5th.com/2017/04/17/2017-04-17/"/>
    <id>http://blog.sin5th.com/2017/04/17/2017-04-17/</id>
    <published>2017-04-17T09:27:21.000Z</published>
    <updated>2017-04-17T16:37:23.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一些异地灾备的文章"><a href="#一些异地灾备的文章" class="headerlink" title="一些异地灾备的文章:"></a>一些异地灾备的文章:</h2><ul>
<li><a href="http://tencentresearch.com/Article/lists/id/4115.html" target="_blank" rel="external">http://tencentresearch.com/Article/lists/id/4115.html</a></li>
<li><a href="http://coolnull.com/4381.html" target="_blank" rel="external">http://coolnull.com/4381.html</a></li>
</ul>
<h2 id="一些关于-raft-的文章"><a href="#一些关于-raft-的文章" class="headerlink" title="一些关于 raft 的文章:"></a>一些关于 raft 的文章:</h2><ul>
<li><a href="https://github.com/maemual/raft-zh_cn/blob/master/raft-zh_cn.md" target="_blank" rel="external">https://github.com/maemual/raft-zh_cn/blob/master/raft-zh_cn.md</a></li>
</ul>
<h2 id="一些关于-mysql-的文章"><a href="#一些关于-mysql-的文章" class="headerlink" title="一些关于 mysql 的文章:"></a>一些关于 mysql 的文章:</h2><ul>
<li><a href="http://www.jianshu.com/p/d877cbe9f0f0" target="_blank" rel="external">http://www.jianshu.com/p/d877cbe9f0f0</a></li>
<li><a href="http://www.cnblogs.com/ivictor/p/5735580.html" target="_blank" rel="external">http://www.cnblogs.com/ivictor/p/5735580.html</a></li>
</ul>
<h2 id="记一次修复-vagrant-与虚拟机的关联"><a href="#记一次修复-vagrant-与虚拟机的关联" class="headerlink" title="记一次修复 vagrant 与虚拟机的关联"></a>记一次修复 vagrant 与虚拟机的关联</h2><p>vagrant 不知为何失去了一个虚拟机的运行状态，执行 <code>vagrant up</code> 生成了新的虚拟机。</p>
<p>打开 virtual box 发现原来的虚拟机还在运行着，使用以下步骤恢复：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"># 查看虚拟机列表，获取 ID</div><div class="line">$ VBoxManage list vms</div><div class="line">&quot;vm-sin5_test_xxxxxxx_xxxxxxx&quot; &#123;xxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&#125;</div><div class="line"></div><div class="line"># 将 ID 粘贴到文件</div><div class="line">echo -n &quot;xxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot; &gt; .vagrant/machines/test/virtualbox/id</div><div class="line">echo -n &quot;15:xxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot; &gt; .vagrant/machines/test/virtualbox/action_provision</div><div class="line"></div><div class="line"># 使用用户名/密码（vagrant/vagrant）登陆到虚拟机，修改 .ssh/authorized_keys</div><div class="line">让公钥与私钥（.vagrant/machines/test/virtualbox/private_key 对应</div><div class="line"></div><div class="line"># 恢复使用</div></pre></td></tr></table></figure>
<h2 id="几道面试题"><a href="#几道面试题" class="headerlink" title="几道面试题"></a>几道面试题</h2><h3 id="n个筛子的点数"><a href="#n个筛子的点数" class="headerlink" title="n个筛子的点数"></a>n个筛子的点数</h3><blockquote>
<p><strong>把n个骰子扔在地上，所有骰子朝上一面的点数之和为s。输入n，打印s所有可能的值出现的概率。</strong></p>
<p>n个筛子中K的出现次数 = (n-1)个筛子中 K-1 .. K-6 的次数之和。</p>
</blockquote>
<h3 id="翻转单词顺序"><a href="#翻转单词顺序" class="headerlink" title="翻转单词顺序"></a>翻转单词顺序</h3><blockquote>
<p><strong>输入一个英文句子，翻转句子中单词的顺序，但单词内字符的顺序不变。</strong></p>
<p> 先翻转句子，再逐个单词翻转</p>
</blockquote>
<h3 id="左旋转字符串"><a href="#左旋转字符串" class="headerlink" title="左旋转字符串"></a>左旋转字符串</h3><blockquote>
<p>字符串的左旋转操作是把字符串前面的若干字符转移到字符串的尾部。</p>
<p>先翻转句子，再翻转前半部分，再翻转后半部分。</p>
</blockquote>
<h3 id="和为s的两个数字"><a href="#和为s的两个数字" class="headerlink" title="和为s的两个数字"></a>和为s的两个数字</h3><blockquote>
<p>输入一个递增排序的数组和一个数字s，在数组中查找两个数，是的它们的和正好是s。如果有多对数字的和等于s，输出任意一对即可。</p>
<p>头尾相加，如果比s小则左侧+1，如果比s大则右侧-1。</p>
</blockquote>
<h3 id="和为s的连续正数序列"><a href="#和为s的连续正数序列" class="headerlink" title="和为s的连续正数序列"></a>和为s的连续正数序列</h3><blockquote>
<p>输入一个正数s，打印出所有和为s的连续正数序列（至少含有两个数）。</p>
<p>small=1, big=2，如果 t = small + .. + big，t&gt;s时small++，t<s时big++。直到small>(1+s)/2</s时big++。直到small></p>
</blockquote>
<h3 id="数组中只出现1次的数字"><a href="#数组中只出现1次的数字" class="headerlink" title="数组中只出现1次的数字"></a>数组中只出现1次的数字</h3><blockquote>
<p>一个整型数组中，除了两个数字之外，其他的数字都出现了两次。求写程序找出这两个只出现一次的数字。要求时间复杂度是O(n)，空间复杂度是O（1）。</p>
<p>*相同数字异或为0。<br>将所有数字异或，得到两个不同数字的异或结果。找出这个结果中任意一个不为0的位，以此作为分界线将数组分为两组，按之前的方法找到只出现一次的数。</p>
</blockquote>
<h3 id="二叉树的深度"><a href="#二叉树的深度" class="headerlink" title="二叉树的深度"></a>二叉树的深度</h3><blockquote>
<p>略</p>
</blockquote>
<h3 id="数字在排序数组中出现的次数"><a href="#数字在排序数组中出现的次数" class="headerlink" title="数字在排序数组中出现的次数"></a>数字在排序数组中出现的次数</h3><blockquote>
<p>略</p>
</blockquote>
<h3 id="两个链表的第一个公共结点"><a href="#两个链表的第一个公共结点" class="headerlink" title="两个链表的第一个公共结点"></a>两个链表的第一个公共结点</h3><blockquote>
<p>略</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一些异地灾备的文章&quot;&gt;&lt;a href=&quot;#一些异地灾备的文章&quot; class=&quot;headerlink&quot; title=&quot;一些异地灾备的文章:&quot;&gt;&lt;/a&gt;一些异地灾备的文章:&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://tencentresearch.co
    
    </summary>
    
    
      <category term="daily" scheme="http://blog.sin5th.com/tags/daily/"/>
    
  </entry>
  
  <entry>
    <title>gdb 的初次使用</title>
    <link href="http://blog.sin5th.com/2017/04/16/gdb-%E7%9A%84%E5%88%9D%E6%AC%A1%E4%BD%BF%E7%94%A8/"/>
    <id>http://blog.sin5th.com/2017/04/16/gdb-的初次使用/</id>
    <published>2017-04-16T13:57:05.000Z</published>
    <updated>2017-04-16T15:08:42.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>阅读 apue, 默写<1.1-简单ls实现>, 运行报段错误, 错误代码如下：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"apue.h"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;dirent.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span></span></div><div class="line"><span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></div><div class="line">&#123;</div><div class="line">  DIR *dp;</div><div class="line">  <span class="keyword">struct</span> dirent *dir;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;</div><div class="line">    err_quit(<span class="string">"usage: ls directory_name"</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> ((dp = opendir(argv[<span class="number">1</span>]) == <span class="literal">NULL</span>)) &#123;</div><div class="line">    err_quit(<span class="string">"can't open directory %s"</span>, argv[<span class="number">1</span>]);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">while</span> ((dir = readdir(dp) != <span class="literal">NULL</span>)) &#123;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, dir-&gt;d_name);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></1.1-简单ls实现></p>
<h2 id="经过"><a href="#经过" class="headerlink" title="经过"></a>经过</h2><p>一时兴起, 想用 gdb 分析一下尸体.</p>
<ol>
<li><code>ulimit -c unlimited</code> 允许当前shell(bash)启动的进程输出core文件;</li>
<li><code>1.1-ls /tmp</code> 制造一个尸体.</li>
<li><code>gdb 1.1-ls core.16835</code> 开始观察.</li>
</ol>
<blockquote>
<p>gdb 可能会提示某些依赖缺失, 安装即可.</p>
</blockquote>
<p>观察到报错内容如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Program terminated with signal 11, Segmentation fault.</div><div class="line">#0  0x00000034e58a8936 in __readdir (dirp=0x0) at ../sysdeps/unix/readdir.c:45</div><div class="line">45	  __libc_lock_lock (dirp-&gt;lock);</div></pre></td></tr></table></figure></p>
<p>明显看出是 readdir 时传入了空指针.<br>回顾代码发现, 因为 <code>dp = opendir(argv[1]) == NULL</code> 这句代码先将 opendir 的结果和 NULL 进行了比较, 之后将值付给了 dp.<br>由于 /tmp 文件存在, opendir 返回值不为 NULL, dp 被赋值 false, 隐式转换为指向 0x0 的指针.</p>
<p>另外 <code>dir = readdir(dp) != NULL</code> 存在同样问题.</p>
<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>正确代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">#include &quot;apue.h&quot;</div><div class="line">#include &lt;string.h&gt;</div><div class="line">#include &lt;dirent.h&gt;</div><div class="line"></div><div class="line">int</div><div class="line">main(int argc, char *argv[])</div><div class="line">&#123;</div><div class="line">  DIR *dp;</div><div class="line">  struct dirent *dir;</div><div class="line"></div><div class="line">  if (argc != 2) &#123;</div><div class="line">    err_quit(&quot;usage: ls directory_name&quot;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  if ((dp = opendir(argv[1])) == NULL) &#123;</div><div class="line">    err_quit(&quot;can&apos;t open directory %s&quot;, argv[1]);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  while ((dir = readdir(dp)) != NULL) &#123;</div><div class="line">    printf(&quot;%s\n&quot;, dir-&gt;d_name);</div><div class="line">  &#125;</div><div class="line">  return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>gdb 是个强大的调试工具, 这里只是简单地看了下引发崩溃的调用, 更多的用法将在以后的学习过程中记述.</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;起因&quot;&gt;&lt;a href=&quot;#起因&quot; class=&quot;headerlink&quot; title=&quot;起因&quot;&gt;&lt;/a&gt;起因&lt;/h2&gt;&lt;p&gt;阅读 apue, 默写&lt;1.1-简单ls实现&gt;, 运行报段错误, 错误代码如下：&lt;br&gt;&lt;figure class=&quot;highlight c
    
    </summary>
    
    
      <category term="clang" scheme="http://blog.sin5th.com/tags/clang/"/>
    
      <category term="gdb" scheme="http://blog.sin5th.com/tags/gdb/"/>
    
      <category term="apue" scheme="http://blog.sin5th.com/tags/apue/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://blog.sin5th.com/2017/04/15/hello-world/"/>
    <id>http://blog.sin5th.com/2017/04/15/hello-world/</id>
    <published>2017-04-15T15:27:46.000Z</published>
    <updated>2017-04-15T15:27:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
